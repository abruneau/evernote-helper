(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.EvernoteHelper=a.EvernoteHelper||{})}(this,function(b){var c,d,e,f,g;b.test=5,c=null,g=function(a){var b,c,d,e,f;for(e=a.split(/[\n\r]/),f="",b=0,c=e.length;b<c;b++)d=e[b],""!==d.trim()&&(f+=d+"\n");return f},e=function(a){var b;return b=a.replace(/&gt;/g,">").replace(/&lt;/g,"<"),b=b.replace(/&quot;/g,'"').replace(/&amp;/g,"&"),b=b.replace(/&apos;/g,"'")},f=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;if(null==a||null==b)return a;for(m=null!=d?d.replaceOnce:void 0,null==m&&(m=!1),f=null!=d?d.lookAhead:void 0,h=null!=d?d.negatedLookAhead:void 0,null==h&&(h=!1),g=null!=d?d.lookBack:void 0,i=null!=d?d.negatedLookBack:void 0,null==i&&(i=!1),o=a.indexOf(b),k=b.length,j=c.length,l=a,e=0,p=0;o>-1&&o<l.length;){if(p>0&&m)return l;if(e>500)return l;n=!1,null!=g&&o>=g.length?l.slice(o-g.length,o)===g&&i?(o=l.indexOf(b,o+k+1),n=!0):i||(o=l.indexOf(b,o+k+1),n=!0):null!=f&&l.length>=o+k+f.length&&(l.slice(o+k,o+k+f.length)===f&&h?(o=l.indexOf(b,o+k+f.length),n=!0):h||(o=l.indexOf(b,o+k+f.length),n=!0)),n||(l=l.slice(0,o)+c+l.slice(o+k,l.length),o=l.indexOf(b,o+j),p+=1),e+=1}return l},d=function(a){var b,c,d,e;for(b=/([^`]\s*?)&#x([a-zA-Z0-9]+?);/i,d=0;d<a.length&&b.test(a.slice(d,a.length));){if(c=b.exec(a.slice(d,a.length)),null==c)return a;e=String.fromCharCode(parseInt("0x"+c[2])),a=a.slice(0,d+c.index)+c[1]+e+a.slice(d+c.index+c[0].length,a.length),d+=c.index+c[1].length+e.length-2}return a},b.prepareHtml=function(a){var b,d,e,f,g,h,i,j;for(null==c&&(c=require("cheerio")),h=c.load(a),i=h(".table-of-contents"),e=0,f=i.length;e<f;e++)b=i[e],h(b).attr("title","table-of-contents");return d='<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">',g=d+(null!=(j=h.html())?j.replace(/nobreakspace/g,"&nbsp;"):void 0)},b.markdownCleanUp=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(k={blockquote:/^\s*>/i,codeblock:/^s{4,}|\t/i,list:/^\s{0,3}(?:\-|\*|\+)\s+/i,numList:/^\s{0,3}\d*\.\s+/i},l={toc:/^\s*\{\!toc\}\s*$/i},m={codeblock1:/^`{3}\S*?\s*$/i},r=/^\s{0,3}\S+/i,j="",n=a.toString().split(/[\n\r]/),b=!1,t=!1,q=-1,c=-1,h="",o="",d=g=0,p=n.length-1;0<=p?g<=p:g>=p;d=0<=p?++g:--g)if(i=n[d],!b||0!==i.trim().length){b=0===i.trim().length,e=!1;for(f in m)if(s=m[f],s.test(i)){""===h?(q=d,h=f,e=!0):(c=d,h="",e=!0);break}if(!e&&h in m&&(e=!0),!e){for(f in k)if(s=k[f],s.test(i)){f===h?e=!0:""!==h?(e=!0,c=d-1,q=d):(e=!0,q=d),h=f;break}!e&&t&&(breakOnSingleNewLine?(c=d-1,h=""):r.test(i)?(c=d-1,h="",e=!1):e=!0)}if(!e)for(f in l)s=l[f],s.test(i)&&(e=!0);o+=e&&!t&&q===d?""+j+i+"\n":!e&&t&&c===d-1?i+"\n"+j:q===d&&c===d-1?""+j+j+i+"\n":i+"\n",t=e}return o},b.toMarkdown=function(b,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa;for(null==h&&(h={}),h.codeInline=!0,h.inCodeBlock=!1,null==c&&(c=require("cheerio")),y=c.load(b),va=null!=(la=h.refStyle)&&la,va&&(wa=[]),M=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z,A;if("h"!==(null!=a&&null!=(r=a.tagName)&&null!=(s=r.slice(0,1))?s.toLowerCase():void 0))return y.html(a);for(c=null!=(t=b.breakOnSingleNewLine)&&t,q=null!=(u=b.preChar)?u:"",z=null!=(v=b.style)?v:"#",h=y(a).html(),k=h,w=y(a).children(),m=0,n=w.length;m<n;m++)d=w[m],g=H(d,b),k=f(k,y.html(d),g,xa);if(k=e(k).replace(/\n/g," "),A=a.tagName,i=parseInt(A.slice(1,A.length)),j="",i>2||"#"===z){for(l=p=0,x=i-1;0<=x?p<=x:p>=x;l=0<=x?++p:--p)j+="#";o="\n"+q+j+" "+k+"   \n"}else j=1===i?"==========":"----------",o="\n"+q+k+"\n"+q+j+"   \n";return c||(o+="\n"),o}}(this),Y=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if("p"!==(null!=a&&null!=(o=a.tagName)?o.toLowerCase():void 0))return y.html(a);c=null!=(p=b.breakOnSingleNewLine)&&p,n=null!=(q=b.preChar)?q:"",l=y(a).html(),m=l,i={};for(d in b)t=b[d],i[d]=t;for(i.sameParagraph=!0,r=y(a).children(),g=0,h=r.length;g<h;g++)j=r[g],k=H(j,i),m=f(m,y.html(j),k,xa);return m+=c?"\n":"\n\n",s=new RegExp("\n(?!(?:"+n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"))","g"),m=n+m.replace(s,"\n"+n),m=e(m)}}(this),S=function(a){return function(a,b){var c,d,e,f,g,h,i,j;return"br"!==(null!=a&&null!=(f=a.tagName)?f.toLowerCase():void 0)?y.html(a):(e=null!=(g=b.preChar)?g:"",j=null!=(h=b.sameParagraph)&&h,d=null!=(i=b.breakOnSingleNewLine)&&i,c=d?"":"    ",j||(c+="\n"+e),c)}}(this),ga=function(a){return function(a,b){return y.html(a)}}(this),_=function(a){return function(a,b){var c,d,e,g,h,i,j,k,l,m,n;if("strong"!==(h=null!=a&&null!=(i=a.tagName)?i.toLowerCase():void 0)&&"b"!==h)return y.html(a);for(m=null!=(j=b.strongStyle)?j:"**",l=y(a).html(),n=l,k=y(a).children(),e=0,g=k.length;e<g;e++)c=k[e],d=H(c,b),n=f(n,y.html(c),d);return""+m+n+m}}(this),J=function(a){return function(a,b){var c,d,e,g,h,i,j,k,l,m,n;if("i"!==(k=null!=a&&null!=(l=a.tagName)?l.toLowerCase():void 0)&&"em"!==k)return y.html(a);for(h=null!=(m=b.emphasisStyle)?m:"_",e=y(a).html(),g=e,n=y(a).children(),i=0,j=n.length;i<j;i++)c=n[i],d=H(c,b),g=f(g,y.html(c),d,xa);return""+h+g+h}}(this),F=function(a){return function(a,b){var c,d,e,g,h,i,j,k,l,m;if("del"!==(null!=a&&null!=(k=a.tagName)?k.toLowerCase():void 0))return y.html(a);for(d=null!=(l=b.delStyle)?l:"~~",c=y(a).html(),e=c,m=y(a).children(),i=0,j=m.length;i<j;i++)g=m[i],h=H(g,b),e=f(e,y.html(g),h,xa);return""+d+e+d}}(this),Q=function(a){return function(a,b){return"<kbd>"+y(a).html()+"</kbd>"}}(this),C=function(a){return function(a,b){var c,d,e,f;return"code"!==(null!=a&&null!=(e=a.tagName)?e.toLowerCase():void 0)?y.html(a):(c=null==(f=b.codeInline)||f,d=c?E(a,b):D(a,b))}}(this),E=function(a){return function(a,b){var c,d,g;return"code"!==(null!=a&&null!=(g=a.tagName)?g.toLowerCase():void 0)?y.html(a):(d=e(y(a).text()),d=f(d,"\\$","\\\\$"),c=d.indexOf("`")>-1?"``"+d+"``":"`"+d+"`")}}(this),D=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o;if("code"!==(l=null!=a&&null!=(m=a.tagName)?m.toLowerCase():void 0))return y.html(a);if("pre"!==(null!=(n=y(a).parent().tagName)?n.toLowerCase():void 0))return y.html(a);for(c=null!=(o=b.codeBlockStyle)?o:"    ",k=y(a).text(),j=k.split(/[\n\r]/),g="",h=0,i=j.length;h<i;h++)d=j[h],g+=c+d+"\n";return g=e(g),g=f(g,"\\$","\\\\$")}}(this),U=function(a){return function(a,b){var c,d,e,g,h,i,j,k;if("li"!==(null!=a&&null!=(j=a.tagName)?j.toLowerCase():void 0))return y.html(a);for(h=y(a).html(),i=h,k=y(a).children(),c=0,d=k.length;c<d;c++)e=k[c],g=H(e,b),i=f(i,y.html(e),g,xa);return i}}(this),ia=function(a){return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if("ul"!==(null!=a&&null!=(n=a.tagName)?n.toLowerCase():void 0))return y.html(a);c=null!=(o=b.breakOnSingleNewLine)&&o,m=null!=(p=b.preChar)?p:"",j=null!=(q=b.listStyle)?q:"-   ",d=null!=(r=b.indentStyle)?r:"    ",l={};for(e in b)t=b[e],l[e]=t;for(l.preChar=m+d,k="",s=y(a).children("li"),f=0,g=s.length;f<g;f++)h=s[f],i=U(h,l),k+=m+j+i+"\n";return k+=c?"\n":"\n\n"}}(this),X=function(a){return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if("ol"!==(null!=a&&null!=(o=a.tagName)?o.toLowerCase():void 0))return y.html(a);c=null!=(p=b.breakOnSingleNewLine)&&p,n=null!=(q=b.preChar)?q:"",e=null!=(r=b.indentStyle)?r:"    ",m={};for(f in b)t=b[f],m[f]=t;for(m.preChar=n+e,l="",d=1,s=y(a).children("li"),g=0,h=s.length;g<h;g++)i=s[g],j=U(i,m),k=d.toString()+".   ",d+=1,l+=n+k+j+"\n";return l+=c?"\n":"\n\n"}}(this),N=function(a){return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return"img"!==(null!=a&&null!=(j=a.tagName)?j.toLowerCase():void 0)?y.html(a):(va=null!=(k=b.refStyle)&&k,c=y(a).attr("alt"),f=y(a).attr("src"),i=null!=(l=y(a).attr("title"))?l:"Optional title",(p=(null!=(m=y(a).attr("class"))?m.indexOf("en-todo"):void 0)>-1)?(d=(null!=(n=y(a).attr("class"))?n.indexOf("en-todo-checked"):void 0)>-1,h=d?"[x]":"[ ]",h+=" "+y(a).html()):(va?(e=((null!=wa?wa.length:void 0)+1).toString(),o="["+e+"]: "+f+' "'+i+'"',g="!["+c+"]["+e+"]",wa.push(o)):g="!["+c+"]("+f+' "'+i+'")',g))}}(this),I=function(a){return function(a,b){var c,d,e,f,g,h,i,j,k;return"embed"!==(null!=a&&null!=(h=a.tagName)?h.toLowerCase():void 0)?y.html(a):(va=null!=(i=b.refStyle)&&i,c=y(a).attr("alt"),d=y(a).attr("src"),g=null!=(j=y(a).attr("title"))?j:"Optional title",va?(f=((null!=wa?wa.length:void 0)+1).toString(),k="["+f+"]: "+d+' "'+g+'"',e="!{"+c+"}["+f+"]",wa.push(k)):e="!{"+c+"}("+d+' "'+g+'")',e)}}(this),T=function(a){return function(a,b){var c,d,e,f,g,h,i,j;return"a"!==(null!=a&&null!=(h=a.tagName)?h.toLowerCase():void 0)?y.html(a):(va=null!=(i=b.refStyle)&&i,f=y(a).text(),c=y(a).attr("href"),(null!=c?c.length:void 0)>0?(g=y(a).attr("title"),g=null!=g?' "'+g+'"':"",va?(d=((null!=wa?wa.length:void 0)+1).toString(),j="["+d+"]: "+c+" "+g,e="!["+f+"]["+d+"]",wa.push(j)):e=f===c?c:"["+f+"]("+c+" "+g+")",e):f)}}(this),L=function(a){return function(a,b){var c,d,e,f,g,h,i,j;return"hr"!==(null!=a&&null!=(g=a.tagName)?g.toLowerCase():void 0)?y.html(a):(c=null!=(h=b.breakOnSingleNewLine)&&h,f=null!=(i=b.preChar)?i:"",e=null!=(j=b.hrStyle)?j:"--------------",d=c?f+e+"\n":f+e+"\n\n")}}(this),B=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if("blockquote"!==(null!=a&&null!=(p=a.tagName)?p.toLowerCase():void 0))return y.html(a);g=null!=(q=b.blockquoteStyle)?q:"> ",o=null!=(r=b.preChar)?r:"",h=null!=(s=b.breakOnSingleNewLine)&&s,n={};for(k in b)u=b[k],n[k]=u;for(n.preChar=o+g,c=y(a).html(),d=c,t=y(a).children(),l=0,m=t.length;l<m;l++)i=t[l],j=H(i,n),d=f(d,y.html(i),j);return d+=h?"\n":"\n\n",d=e(d)}}(this),R=function(a){return function(a,b){var c,d,g,h,i,j,k,l;if("label"!==(null!=a&&null!=(k=a.tagName)?k.toLowerCase():void 0))return y.html(a);for(h=y(a).html(),i=h,l=y(a).children(),g=0,j=l.length;g<j;g++)c=l[g],d=H(c,b),i=f(i,y.html(c),d,xa);return i=e(i)}}(this),W=function(a){return function(a,b){var c,d,e,g,h,i,j,k,l,m;if("object"!==(null!=a&&null!=(j=a.tagName)?j.toLowerCase():void 0))return y.html(a);if(!((null!=(k=y(a).attr("class"))?k.indexOf("en-todo"):void 0)>-1))return ha(a,b);for(c=(null!=(l=y(a).attr("class"))?l.indexOf("en-todo-checked"):void 0)>-1,i=c?"[x]":"[ ]",i+=" "+y(a).html(),m=y(a).children(),g=0,h=m.length;g<h;g++)d=m[g],e=H(d,b),i=f(i,y.html(d),e,xa);return i}}(this),P=function(a){return function(a,b){var c,d,e,f;return"input"!==(null!=a&&null!=(e=a.tagName)?e.toLowerCase():void 0)?y.html(a):"checkbox"!==y(a).attr("type")?ha(a,b):(c=(null!=(f=y(a).attr("class"))?f.indexOf("en-todo-checked"):void 0)>-1,d=c?"[x]":"[ ]",d+=" "+y(a).text())}}(this),O=function(a){return function(a,b){var c,d,f,g,h,i,j,k;if("span"!==(null!=a&&null!=(h=a.tagName)?h.toLowerCase():void 0))return y.html(a);if(!(y(a).hasClass("math")||(null!=(i=y(a).attr("tooltip"))?i.length:void 0)>0))return y.html(a);for(g="",j=y(a).find("span"),c=0,d=j.length;c<d;c++)f=j[c],"raw_mathjax_script"===(k=y(f).attr("title"))&&(g+=e(y(f).text()));return g}}(this),V=function(a){return function(a,b){var c,d,f,g,h,i,j,k;if("span"!==(null!=a&&null!=(h=a.tagName)?h.toLowerCase():void 0))return y.html(a);if("hidden_script_mathjax"!==(i=y(a).attr("title")))return y.html(a);for(g="\n",j=y(a).find("span"),c=0,d=j.length;c<d;c++)f=j[c],"raw_mathjax_script"===(k=y(f).attr("title"))&&(g+=e(y(f).text()));return g+="\n"}}(this),$=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o;if("span"!==(null!=a&&null!=(j=a.tagName)?j.toLowerCase():void 0))return y.html(a);if("hidden_script_mathjax"===(k=y(a).attr("title")))return V(a,b);if("MathJax_SVG"===y(a).attr("title")&&1===y(a).children().length&&1===y(a).children("img").length)return"";if(y(a).hasClass("math")||(null!=(l=y(a).attr("tooltip"))?l.length:void 0)>0)return O(a,b);for(n=y(a).attr("style"),i=/background\-color\:\s*yellow/i,o=b.inCodeBlock||null==n?y(a).html():i.test(n)?"<mark>"+y(a).html()+"</mark>":y.html(a),m=y(a).children(),g=0,h=m.length;g<h;g++)c=m[g],d=H(c,b),o=f(o,y.html(c),d,xa);return o=e(o),""+o}}(this),Z=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if("pre"!==(null!=a&&null!=(q=a.tagName)?q.toLowerCase():void 0))return y.html(a);c=null!=(r=b.breakOnSingleNewLine)&&r,l={};for(h in b)t=b[h],l[h]=t;for(l.codeInline=!1,o=y(a).attr("title"),o&&o.indexOf("fenced-code-block")>-1&&(j=o.slice(18,o.length),p="```"+j+"\n",l.inCodeBlock=!0),m=y(a).html(),n=m,s=y(a).children(),i=0,k=s.length;i<k;i++)d=s[i],g=H(d,l),n=f(n,y.html(d),g,xa);return n+="\n",n=e(n),"\n"===n.charAt(0)&&(n=n.slice(1,n.length)),null!=p&&(n=""+p+n+"```"),c||(n+="\n"),n}}(this),fa=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q;if("tr"!==(null!=a&&null!=(k=a.tagName)?k.toLowerCase():void 0))return y.html(a);j={};for(g in b)q=b[g],j[g]=q;for(d=0,p=y(a).html(),l=y(a).children(),h=0,i=l.length;h<i;h++)o=l[h],j.colCharCount=null!=(m=b.maxColCharCount)?m[d]:void 0,j.colAlign=null!=(n=b.colAlignments)?n[d]:void 0,c=H(o,j),p=f(p,y.html(o),c,xa),d+=1;return p="|"+e(p).replace(/\n/g,"")+"\n"}}(this),ca=function(a){return function(a,b){var c,d,g,h,i,j,k;if("tbody"!==(null!=a&&null!=(i=a.tagName)?i.toLowerCase():void 0))return y.html(a);for(k=y(a).html(),j=y(a).children(),g=0,h=j.length;g<h;g++)c=j[g],d=H(c,b),k=f(k,y.html(c),d,xa);return k=e(k)}}(this),da=function(a){return function(a,b){var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if("th"!==(p=null!=a&&null!=(q=a.tagName)?q.toLowerCase():void 0)&&"td"!==p)return y.html(a);for(u=b.colAlign,v=y(a).html(),r=y(a).children(),g=0,h=r.length;g<h;g++)c=r[g],d=H(c,b),v=f(v,y.html(c),d,xa);if(v=v.replace(/\$/g,"\\$$").replace(/\n/g,""),null!=b.colCharCount&&v.length<b.colCharCount-3){for(l=b.colCharCount-3-v.length,m=Math.round(.5*l),n=l-m,k="",o="",e=i=0,s=m-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i)k+=" ";if(n>0)for(e=j=0,t=n-1;0<=t?j<=t:j>=t;e=0<=t?++j:--j)o+=" ";switch(u){case"left":v+=k+o;break;case"right":v=k+o+v;break;default:v=k+v+o}}return v=" "+v+" |"}}(this),ea=function(a){return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if("thead"!==(null!=a&&null!=(q=a.tagName)?q.toLowerCase():void 0))return y.html(a);if(1!==y(a).children("tr").length)return y.html(a);for(f=[],t=/text\-align\:(.+?)(?:;|(?:))$/i,u=y(a).children("tr")[0],null==b.maxColCharCount&&(b.maxColCharCount=[]),i=0,r=y(u).children("th"),j=0,k=r.length;j<k;j++)d=r[j],h=y(d).attr("style"),e=t.test(h)?t.exec(h)[1].trim():"none",f.push(e),null==(null!=(s=b.maxColCharCount)?s[i]:void 0)&&(b.maxColCharCount[i]=y(d).text().length+3),i+=1;for(n=function(a){var b,c,d,e;for(e=" ",b=c=1,d=g-3;1<=d?c<=d:c>=d;b=1<=d?++c:--c)e+="-";return e+=" |"},o=function(a){var b,c,d,e;for(e=":",b=c=1,d=g-3;1<=d?c<=d:c>=d;b=1<=d?++c:--c)e+="-";return e+=" |"},p=function(a){var b,c,d,e;for(e=" ",b=c=1,d=g-3;1<=d?c<=d:c>=d;b=1<=d?++c:--c)e+="-";return e+=":|"},c="|",i=0,m=0,l=f.length;m<l;m++){switch(e=f[m],g=b.maxColCharCount[i],e){case"center":c+=n(g);break;case"left":c+=o(g);break;case"right":c+=p(g);break;default:c+=n(g)}i+=1}return v=H(y(a).children("tr")[0],b)+c+"\n"}}(this),ba=function(a){return function(a,b){var c,d,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F;if("table"!==(null!=a&&null!=(v=a.tagName)?v.toLowerCase():void 0))return y.html(a);for(s=[],h=[],B=/text\-align\:(.+?)(?:;|(?:))$/i,w=y(a).children("thead, tbody"),m=0,n=w.length;m<n;m++)for(E=w[m],x=y(E).children("tr"),r=0,o=x.length;r<o;r++)for(F=x[r],l=0,z=y(F).children("td, th"),t=0,p=z.length;t<p;t++)c=z[t],j=y(c).attr("style"),d=B.test(j)?B.exec(j)[1]:"none",i=Math.min(y(c).text().length+3,35),s.length<l+1?(s.push(i),h.push(d)):i>s[l]&&(s[l]=i),s[l]<4&&(s[l]=4),l+=1;for(b.maxColCharCount=s,b.colAlignments=h,D=y(a).html(),A=y(a).children(),u=0,q=A.length;u<q;u++)C=A[u],k=H(C,b),D=f(D,y.html(C),k,xa);return D=g(e(D))+"\n"}}(this),aa=function(a){return function(a,b){var c,d,f;return"sup"!==(null!=a&&null!=(f=a.tagName)?f.toLowerCase():void 0)?y.html(a):1===y(a).children().length&&1===y(a).children("a").length?(d=y(a).children("a")[0],c=e(y(d).attr("href").replace(/#fn\:/i,"")).replace(/%20/g," "),"[^"+c+"]"):ha(a,b)}}(this),K=function(a){return function(a,b){var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if("div"!==(null!=a&&null!=(q=a.tagName)?q.toLowerCase():void 0))return y.html(a);if("footnotes"!==y(a).attr("title"))return G(a);if(1!==y(a).children("hr").length)return G(a);if(1!==y(a).children("ol").length)return G(a);for(d="\n",r=y(a).children("ol").children("li"),f=0,g=r.length;f<g;f++){for(j=r[f],s=y(j).children("a"),o=0,h=s.length;o<h;o++)if(l=s[o],(null!=(t=y(l).attr("href"))?t.indexOf("#fnref:"):void 0)>-1){c=e(y(l).attr("href").replace(/#fnref\:/i,"")).replace(/%20/g," "),d+="[^"+c+"]: ";break}for(k=y(y.html(j)),u=y(k).children("a"),p=0,i=u.length;p<i;p++)if(m=u[p],(null!=(v=y(m).attr("href"))?v.indexOf("#fnref:"):void 0)>-1){y(m).remove();break}n=U(y(k)[0],b).replace(/\[.+?\]\(.+?\)/i,""),d+=n.replace(/\n{2,}/g,"\n")+"\n\n"}return d=e(d)}}(this),G=function(b){return function(b,c){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if("div"!==(null!=b&&null!=(r=b.tagName)?r.toLowerCase():void 0))return y.html(b);if("MathJax_SVG_Display"===(s=y(b).attr("title")))return"";if("MathJax_SVG_Display"===(t=y(b).attr("class")))return"";if(q=["margin: 15px 0; margin-top: 0;","margin: 15px 0;"],i=y(b).attr("style"),d=y(b).attr("class"),k=y(b).attr("title"),"footnotes"===k&&2===y(b).children().length&&1===y(b).children("hr").length&&1===y(b).children("ol").length)return K(b,c);"ever-notedown-preview"===d||null==i||a.call(q,i)>=0?(v=!1,h="\n"+y(b).html()+"\n"):(h=y.html(b),v=!0),j=h,p={};for(m in c)w=c[m],p[m]=w;for(p.styledDiv=!0,u=y(b).children(),n=0,o=u.length;n<o;n++)g=u[n],l=H(g,p),j=f(j,y.html(g),l,xa);return j=e(j)}}(this),ha=function(a){return function(a,b){var c,d,g,h,i,j,k,l;if(1===y(a).length){for(g=y(a).html(),h=g,l=y(a).children(),i=0,j=l.length;i<j;i++)c=l[i],d=H(c,b),k=h,h=f(h,y.html(c),d,xa);return h=e(h)}}}(this),H=function(a){return function(a,b){var c,d,g,h,i,j,k,l,m;if(!(y(a).length>=1))return"";if(y(a).length>1){for(h=y.html(a),i=h,j=0,k=a.length;j<k;j++)c=a[j],d=H(c,b),i=f(i,y.html(c),d,xa);g=e(i)}else if(m=null!=(l=a.tagName)?l:"",m=m.toLowerCase(),"h1"===m||"h2"===m||"h3"===m||"h4"===m||"h5"===m||"h6"===m)g=M(a,b);else switch(m){case"p":g=Y(a,b);break;case"pre":g=Z(a,b);break;case"img":g=N(a,b);break;case"embed":g=I(a,b);break;case"code":g=C(a,b);break;case"kbd":g=Q(a,b);break;case"a":g=T(a,b);break;case"strong":g=_(a,b);break;case"b":g=_(a,b);break;case"em":g=J(a,b);break;case"i":g=J(a,b);break;case"u":g=ga(a,b);break;case"del":g=F(a,b);break;case"span":g=$(a,b);break;case"ul":g=ia(a,b);break;case"ol":g=X(a,b);break;case"blockquote":g=B(a,b);break;case"hr":g=L(a,b);break;case"br":g=S(a,b);break;case"div":g=G(a,b);break;case"label":g=R(a,b);break;case"object":g=W(a,b);break;case"input":g=P(a,b);break;case"table":g=ba(a,b);break;case"thead":g=ea(a,b);break;case"tbody":g=ca(a,b);break;case"tr":g=fa(a,b);break;case"th":g=da(a,b);break;case"td":g=da(a,b);break;case"sup":g=aa(a,b);break;default:g=ha(a,b)}return g}}(this),ya=y.root().children(),1===ya.length&&"div"===ya[0].tagName&&(b=y(ya[0]).html(),y=c.load(b)),ma=y("div"),l=0,m=ma.length;l<m;l++)i=ma[l],"none"===y(i).css("display")&&y(i).remove();for(na=y("ul"),v=0,n=na.length;v<n;v++)Ea=na[v],'"table-of-contents"'===y(Ea).attr("title")&&(y(Ea).after("<p>   </p><p>{!toc}</p><p>   </p>"),y(Ea).remove());for(oa=y("p"),x=0,o=oa.length;x<o;x++)A=oa[x],0===y(A).children().length&&0===y(A).text().trim().length&&y(A).remove();for(ka=/^(?:(?:)|(.+?))display\:(?:(?:)|(?:\s*)none;(?:(?:)|(?:.+?)))$/i,pa=y("img"),z=0,p=pa.length;z<p;z++)k=pa[z],ka.test(y(k).attr("style"))&&y(k).remove();for(qa=y("embed"),ja=0,q=qa.length;ja<q;ja++)j=qa[ja],ka.test(y(j).attr("style"))&&y(j).remove();for(ra=y("script"),za=0,r=ra.length;za<r;za++)Aa=ra[za],y(Aa).attr("type").indexOf("math/tex")>-1&&y(Aa).remove();for(sa=y("span.math"),Ca=0,s=sa.length;Ca<s;Ca++)Ba=sa[Ca],y(Ba).remove();for(ta=y("span"),Da=0,t=ta.length;Da<t;Da++)Ba=ta[Da],0===y(Ba).html().trim().length&&y(Ba).remove();if(xa={replaceOnce:!0},w=H(y.root().children(),h),(null!=wa?wa.length:void 0)>0)for(Fa=0,u=wa.length;Fa<u;Fa++)ua=wa[Fa],null!=ua&&(w+=ua+"\n");return w=d(w)}})}).call(this);